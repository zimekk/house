(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{557:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/sketch",function(){return n(612)}])},612:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(263),s=n(3239),l=n(759);let i={selection:"selection",rectangle:"rectangle",line:"line",pencil:"pencil",text:"text"},o=e=>{let{type:t,x1:n,y1:r,x2:s,y2:l}=e;return t===i.rectangle?{x1:Math.min(n,s),y1:Math.min(r,l),x2:Math.max(n,s),y2:Math.max(r,l)}:n<s||n===s&&r<l?{x1:n,y1:r,x2:s,y2:l}:{x1:s,y1:l,x2:n,y2:r}},a=e=>["line","rectangle"].includes(e),c=(e,t,n,r,s,o)=>{let a=l.A.generator();switch(o){case i.line:case i.rectangle:{let l=o===i.line?a.line(t,n,r,s):a.rectangle(t,n,r-t,s-n);return{id:e,x1:t,y1:n,x2:r,y2:s,type:o,roughElement:l}}case i.pencil:return{id:e,x1:0,y1:0,x2:0,y2:0,type:o,points:[{x:t,y:n}],roughElement:null};case i.text:return{id:e,type:o,x1:t,y1:n,x2:r,y2:s,text:""};default:throw Error("Type not recognised: ".concat(o))}},u=e=>{switch(e){case"topLeft":case"bottomRight":return"nwse-resize";case"topRight":case"bottomLeft":return"nesw-resize";case"start":case"end":case"inside":return"move";default:return"default"}},x=(e,t,n)=>{switch(console.log(["drawElement"],n),n.type){case"line":case"rectangle":e.draw(n.roughElement);break;default:throw Error("Type not recognised: ".concat(n.type))}},d=(e,t,n)=>n.map(n=>({...n,position:h(e,t,n)})).find(e=>null!==e.position),h=(e,t,n)=>{let{type:r,x1:s,x2:l,y1:o,y2:a}=n;switch(r){case i.line:{let n=f(s,o,l,a,e,t),r=g(e,t,s,o,"start"),i=g(e,t,l,a,"end");return r||i||n}case i.rectangle:{let n=g(e,t,s,o,"topLeft"),r=g(e,t,l,o,"topRight"),i=g(e,t,s,a,"bottomLeft"),c=g(e,t,l,a,"bottomRight"),u=e>=s&&e<=l&&t>=o&&t<=a?"inside":null;return n||r||i||c||u}case i.pencil:return n.points.some((r,s)=>{let l=n.points[s+1];return!!l&&null!=f(r.x,r.y,l.x,l.y,e,t,5)})?"inside":null;case i.text:return e>=s&&e<=l&&t>=o&&t<=a?"inside":null;default:throw Error("Type not recognised: ".concat(r))}},p=(e,t,n,r)=>{let{x1:s,y1:l,x2:i,y2:o}=r;switch(n){case"start":case"topLeft":return{x1:e,y1:t,x2:i,y2:o};case"topRight":return{x1:s,y1:t,x2:e,y2:o};case"bottomLeft":return{x1:e,y1:l,x2:i,y2:t};case"end":case"bottomRight":return{x1:s,y1:l,x2:e,y2:t};default:return r}},f=function(e,t,n,r,s,l){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o={x:e,y:t},a={x:n,y:r},c={x:s,y:l};return Math.abs(m(o,a)-(m(o,c)+m(a,c)))<i?"inside":null},m=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),g=(e,t,n,r,s)=>5>Math.abs(e-n)&&5>Math.abs(t-r)?s:null;function y(){let e=i.rectangle,[t,n]=(0,s.useState)([]),[h,f]=(0,s.useState)({x:0,y:0}),[m,g]=(0,s.useState)({x:0,y:0}),[y,w]=(0,s.useState)("none"),[v,j]=(0,s.useState)(e),[b,N]=(0,s.useState)(),[E,M]=(0,s.useState)(1),[_,k]=(0,s.useState)({x:0,y:0}),L=(0,s.useRef)(null);(0,s.useLayoutEffect)(()=>{let e=L.current;if(!e)return;let n=e.getContext("2d"),r=l.A.canvas(e);n.clearRect(0,0,e.width,e.height);let s=e.width*E,i=e.height*E,o=(s-e.width)/2,a=(i-e.height)/2;k({x:o,y:a}),n.save(),n.translate(h.x*E-o,h.y*E-a),n.scale(E,E),t.forEach(e=>{"writing"===y&&b&&b.id===e.id||x(r,n,e)}),n.restore()},[t,y,b,h,E]);let R=(e,r,s,l,o,a,u)=>{let x=[...t];switch(a){case i.line:case i.rectangle:x[e]=c(e,r,s,l,o,a);break;case i.pencil:{let t=x[e].points||[];x[e].points=[...t,{x:l,y:o}];break}case i.text:{let t=document.getElementById("canvas");if(!(t instanceof HTMLCanvasElement))throw Error("Canvas element not found");let n=t.getContext("2d");if(!n)throw Error("Could not get 2D context from canvas");if(!u)throw Error("No text options provided for text tool");let l=n.measureText(u.text).width;x[e]={...c(e,r,s,r+l,s+24,a),text:u.text};break}default:throw Error("Type not recognised: ".concat(a))}n(x)},C=e=>({clientX:(e.clientX-h.x*E+_.x)/E,clientY:(e.clientY-h.y*E+_.y)/E});return(0,r.jsx)("canvas",{ref:L,onMouseDown:e=>{if("writing"===y)return;let{clientX:r,clientY:s}=C(e);if(console.log(["handleMouseDown"],y,v),v===i.selection){let e=d(r,s,t);if(e){let t={...e};if("pencil"===e.type&&e.points){let n=e.points.map(e=>r-e.x),l=e.points.map(e=>s-e.y);t={...t,xOffsets:n,yOffsets:l}}else{let e=r-t.x1,n=s-t.y1;t={...t,offsetX:e,offsetY:n}}N(t),n(e=>e),"inside"===e.position?w("moving"):w("resizing")}}else{let e=c(t.length,r,s,r,s,v);n(t=>[...t,e]),N(e),w("text"===v?"writing":"drawing")}},onMouseMove:e=>{let{clientX:r,clientY:s}=C(e);if("panning"===y){let e=r-m.x,t=s-m.y;f({x:h.x+e,y:h.y+t});return}if(console.log(["handleMouseMove"],y,v),v===i.selection){let n=d(r,s,t);n&&n.position?e.target.style.cursor=u(n.position):e.target.style.cursor="default"}if("drawing"===y){let e=t.length-1,{x1:n,y1:l}=t[e];R(e,n,l,r,s,v)}else if("moving"===y&&b){if("pencil"===b.type&&"points"in b&&"xOffsets"in b&&"yOffsets"in b){let e=b.points.map((e,t)=>({x:r-b.xOffsets[t],y:s-b.yOffsets[t]})),l=[...t];l[b.id]={...l[b.id],points:e},n(l)}else{let{id:e,x1:t,x2:n,y1:l,y2:i,type:o,offsetX:a,offsetY:c}=b,u=r-(null!=a?a:0),x=s-(null!=c?c:0),d="text"===o&&b.text?{text:b.text}:void 0;R(e,u,x,u+(n-t),x+(i-l),o,d)}}else if("resizing"===y&&b&&b.position){let{id:e,type:t,position:n,...l}=b;if("string"==typeof n){let{x1:i,y1:o,x2:a,y2:c}=p(r,s,n,l);R(e,i,o,a,c,t)}}},onMouseUp:e=>{let{clientX:n,clientY:r}=C(e);if(b){let e=b.id,{id:s,type:l}=t[e];if(("drawing"===y||"resizing"===y)&&a(l)){let{x1:n,y1:r,x2:i,y2:a}=o(t[e]);R(s,n,r,i,a,l)}let i=b.offsetX||0,c=b.offsetY||0;if("text"===b.type&&n-i===b.x1&&r-c===b.y1){w("writing");return}}"writing"!==y&&("panning"===y&&(document.body.style.cursor="default"),w("none"),N(null))},style:{border:"1px solid red",width:"100%"}})}function w(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t(!0)},[]),(0,r.jsx)(r.Fragment,{children:e&&(0,r.jsx)(y,{})})}let v=Object.assign(function(){return(0,r.jsx)(w,{})},{Layout:n(8246).Layout})},8246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DeployButton:()=>i,Layout:()=>a,Nav:()=>o,default:()=>c});var r=n(263),s=n(8448);function l(){return(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"house"})})}let i=e=>{var t;let n=[["repository-url",e.repositoryUrl],["env",null===(t=e.env)||void 0===t?void 0:t.join(",")],["project-name",e.projectName],["repository-name",e.repositoryName]].reduce((e,t)=>{let[n,r]=t;return r&&e.push("".concat(n,"=").concat(encodeURIComponent(r))),e},[]).join("&");return(0,r.jsx)(s.$n,{Component:"a",href:e.customDeployUrl?e.customDeployUrl:"".concat("https://vercel.com/new/clone").concat(n?"?".concat(n):""),target:"_blank",rel:"noreferrer",children:"Clone & Deploy"})},o=e=>{let{title:t,links:n,path:l,deployButton:o}=e,a=(null==o?void 0:o.repositoryUrl)||"".concat("https://github.com/vercel/examples/tree/main","/").concat(l);return(0,r.jsx)("nav",{className:"border-b border-gray-200 py-5 relative z-20 bg-background shadow-[0_0_15px_0_rgb(0,0,0,0.1)]",children:(0,r.jsxs)("div",{className:"flex items-center lg:px-6 px-8 mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(s.N_,{href:"/",children:(0,r.jsx)("span",{children:(0,r.jsxs)("svg",{height:"26",viewBox:"0 0 75 65",fill:"#000",children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("path",{d:"M37.59.25l36.95 64H.64l36.95-64z"})]})})}),(0,r.jsxs)("ul",{className:"flex items-center content-center",children:[(0,r.jsx)("li",{className:"ml-2 text-gray-200",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",width:"32",height:"32",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,r.jsx)("path",{d:"M16.88 3.549L7.12 20.451"})})}),(0,r.jsxs)("li",{className:"font-medium",style:{letterSpacing:".01px"},children:[n.map(e=>(0,r.jsx)(s.N_,{href:"/".concat(e),style:{marginRight:".5em"},children:e},e)),(0,r.jsx)("a",{href:"tmp/catch-ext.zip",style:{marginRight:".5em"},children:"ext"}),(0,r.jsx)("a",{href:"api/inspirations",style:{marginRight:".5em"},children:"zip"})]})]})]}),(0,r.jsx)("div",{className:"flex-1 justify-end hidden md:flex",children:(0,r.jsxs)("nav",{className:"flex-row inline-flex items-center",children:[(0,r.jsx)("span",{className:"ml-2 h-full flex items-center cursor-not-allowed text-accents-5",children:(0,r.jsx)(s.$n,{variant:"ghost",Component:"a",href:"https://github.com/vercel/examples/tree/main",target:"_blank",rel:"noreferrer",children:"More Examples â†’"})}),(0,r.jsx)("span",{className:"ml-2 h-full flex items-center cursor-not-allowed text-accents-5",children:(0,r.jsx)(i,{...o,repositoryUrl:a,projectName:(null==o?void 0:o.projectName)||l,repositoryName:(null==o?void 0:o.repositoryName)||l})})]})})]})})},a=e=>{let{children:t,...n}=e;return(0,r.jsxs)("div",{className:"mx-auto h-screen flex flex-col",children:[(0,r.jsx)(o,{...n}),(0,r.jsx)("div",{className:"flex flex-auto",children:t})]})},c=Object.assign(function(){return(0,r.jsx)(l,{})},{Layout:a})}},e=>{var t=t=>e(e.s=t);e.O(0,[448,759,636,593,792],()=>t(557)),_N_E=e.O()}]);